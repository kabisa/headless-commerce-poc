
name: GitHub Actions Vercel Deploy
on: [push]
jobs:
  build:
    name: Build
    runs-on: ubuntu-latest
    steps:
      - name: Setup Node.js environment
        uses: actions/setup-node@v2.1.5
        with:
          # Version Spec of the version to use.  Examples: 12.x, 10.15.1, >=10.15.0
          node-version: 14.x
      - run: npm install --global yarn
      - name: Check out repository code
        uses: actions/checkout@v2
      - run: ls
      - name: copy .env
      - run: cp framework/shopify/.env.template .env.local
      - run: yarn install
      - run: yarn run build
      - run: ls
  
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Vercel Deployment
        # You may pin to the exact commit or the version.
        # uses: xmflsct/action-vercel-deployment@dfd18ea029d56a90ce06c154cb40de413840f151
        uses: xmflsct/action-vercel-deployment@v0.5.3
        env:
          ACTIONS_ALLOW_UNSECURE_COMMANDS: 'true'
        with:
          # Your token at Vercel. See https://vercel.com/account/tokens
          vercelToken: 3MIW1GLzgtSZBC8qM4AExuOD
          # Your Organization ID at Vercel.
          vercelOrgId: Kabisa
          # Your Project ID at Vercel.
          vercelProjectId: headless-commerce-poc-github-actions-deploy
          # Your token at GitHub. See https://github.com/settings/tokens
          githubToken: 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
          # If you would like to build through GitHub Actions inatead of Vercel.
#           buildOption: # optional
          # If building through GitHub Actions, a source directory may be supplied.
#           buildSource: # optional, default is 
          # If building through GitHub Actiosn, an output directory may be supplied.
#           deploySource: # optional, default is 
          # If this deployment is targeted as production.
#           deployProduction: # optional
          # You can assign a domain to this deployment. Please note that this domain must have been configured in the project.
#           assignDomain: # optional
